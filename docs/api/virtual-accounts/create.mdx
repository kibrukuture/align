---
title: "Create Virtual Account"
description: "Create a virtual bank account for seamless fiat deposits"
icon: "building-columns"
---

# Create Virtual Account

Create a dedicated virtual bank account for a customer to receive fiat deposits. When funds are deposited, they are automatically converted to cryptocurrency and sent to the specified wallet.

<Info>
  Virtual accounts require the customer to have completed KYC verification. See
  [Create KYC Session](/docs/api/customers/create-kyc-session).
</Info>

## Method Signature

```typescript
align.virtualAccounts.create(
  customerId: string,
  data: CreateVirtualAccountRequest
): Promise<VirtualAccount>
```

## Parameters

<ParamField path="customerId" type="string" required>
  The unique customer identifier (UUID format)
</ParamField>

<ParamField body="source_currency" type="'usd' | 'eur' | 'aed'" required>
  Fiat currency for deposits
</ParamField>

<ParamField
  body="source_rails"
  type="'ach' | 'wire' | 'sepa' | 'swift' | 'uaefts'"
  required
>
  Payment rails for receiving deposits
</ParamField>

<ParamField body="destination_token" type="'usdc' | 'usdt' | 'eurc'" required>
  Cryptocurrency token to receive
</ParamField>

<ParamField body="destination_network" type="string" required>
  Blockchain network: `polygon`, `ethereum`, `solana`, `base`, `arbitrum`,
  `tron`
</ParamField>

<ParamField body="destination_wallet_address" type="string">
  Wallet address to receive converted crypto. If not provided, a managed wallet
  is created.
</ParamField>

## Returns

<ResponseField name="id" type="string">
  Unique identifier for the virtual account
</ResponseField>

<ResponseField name="status" type="string">
  Account status: `active`, `pending`, `inactive`
</ResponseField>

<ResponseField name="deposit_instructions" type="object">
  Bank account details for depositing funds
</ResponseField>

## Examples

### Create USD Virtual Account (ACH)

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    import Align from "@tolbel/align";

    const align = new Align({
      apiKey: process.env.ALIGN_API_KEY!,
      environment: "sandbox",
    });

    const virtualAccount = await align.virtualAccounts.create(
      "123e4567-e89b-12d3-a456-426614174000",
      {
        source_currency: "usd",
        source_rails: "ach",
        destination_token: "usdc",
        destination_network: "polygon",
      }
    );

    console.log(`Account ID: ${virtualAccount.id}`);
    console.log(`Status: ${virtualAccount.status}`);

    // Get deposit instructions
    const instructions = virtualAccount.deposit_instructions;
    console.log(`Account Number: ${instructions.account_number}`);
    console.log(`Routing Number: ${instructions.routing_number}`);
    ```

  </Tab>
  <Tab title="JavaScript">
    ```javascript
    const virtualAccount = await align.virtualAccounts.create(
      "123e4567-e89b-12d3-a456-426614174000",
      {
        source_currency: "usd",
        source_rails: "ach",
        destination_token: "usdc",
        destination_network: "polygon",
      }
    );

    console.log("Account Number:", virtualAccount.deposit_instructions.account_number);
    console.log("Routing Number:", virtualAccount.deposit_instructions.routing_number);
    ```

  </Tab>
</Tabs>

### Create EUR Virtual Account (SEPA/IBAN)

```typescript
const euroAccount = await align.virtualAccounts.create(customerId, {
  source_currency: "eur",
  source_rails: "sepa",
  destination_token: "usdc",
  destination_network: "polygon",
});

// IBAN accounts have different deposit instructions
const instructions = euroAccount.deposit_instructions;
console.log(`IBAN: ${instructions.iban}`);
console.log(`BIC: ${instructions.bic}`);
```

### With Custom Wallet Address

Specify your own wallet to receive the converted crypto:

```typescript
const virtualAccount = await align.virtualAccounts.create(customerId, {
  source_currency: "usd",
  source_rails: "ach",
  destination_token: "usdc",
  destination_network: "polygon",
  destination_wallet_address: "0x742d35Cc6634C0532925a3b844Bc9e7595f0aB42",
});
```

## Deposit Instructions

The `deposit_instructions` field contains the banking details customers need for deposits:

### US Account (ACH/Wire)

```json
{
  "account_number": "123456789",
  "routing_number": "021000021",
  "account_type": "checking",
  "bank_name": "Example Bank",
  "beneficiary_name": "Align Labs Inc."
}
```

### IBAN Account (SEPA)

```json
{
  "iban": "DE89370400440532013000",
  "bic": "COBADEFFXXX",
  "bank_name": "Commerzbank",
  "beneficiary_name": "Align Labs Inc."
}
```

<Tip>
Use the SDK's type guards to handle different deposit instruction types:

```typescript
import { isUSAccountDetails, isIBANAccountDetails } from "@tolbel/align";

if (isUSAccountDetails(virtualAccount.deposit_instructions)) {
  console.log("Routing:", virtualAccount.deposit_instructions.routing_number);
} else if (isIBANAccountDetails(virtualAccount.deposit_instructions)) {
  console.log("IBAN:", virtualAccount.deposit_instructions.iban);
}
```

</Tip>

## Supported Configurations

| Source Currency | Source Rails | Destination Token | Destination Networks                      |
| --------------- | ------------ | ----------------- | ----------------------------------------- |
| USD             | ACH, Wire    | USDC, USDT        | Polygon, Ethereum, Base, Arbitrum, Solana |
| EUR             | SEPA, SWIFT  | USDC, EURC        | Polygon, Ethereum, Base                   |
| AED             | UAEFTS       | USDC              | Polygon, Ethereum                         |

## Error Handling

```typescript
import { AlignError, AlignValidationError } from "@tolbel/align";

try {
  const account = await align.virtualAccounts.create(customerId, {
    source_currency: "usd",
    source_rails: "ach",
    destination_token: "usdc",
    destination_network: "polygon",
  });
} catch (error) {
  if (error instanceof AlignValidationError) {
    console.error("Invalid request:", error.errors);
  } else if (error instanceof AlignError) {
    if (error.statusCode === 403) {
      console.error("KYC verification required");
    } else {
      console.error(`API Error: ${error.message}`);
    }
  }
}
```

<Warning>
  Creating a virtual account will fail with a 403 error if the customer hasn't
  completed KYC verification.
</Warning>

## Related Methods

<CardGroup cols={2}>
  <Card
    title="Get Virtual Account"
    icon="eye"
    href="/docs/api/virtual-accounts/get"
  >
    Retrieve account details
  </Card>
  <Card
    title="List Virtual Accounts"
    icon="list"
    href="/docs/api/virtual-accounts/list"
  >
    List all customer accounts
  </Card>
  <Card
    title="Simulate Deposit"
    icon="flask"
    href="/docs/api/virtual-accounts/simulate"
  >
    Test deposits in sandbox
  </Card>
</CardGroup>
